#!/usr/bin/env node
'use strict';

let download = require('../lib/download');
let api = require('../lib/single-api');
let argv = require('minimist')(process.argv.slice(2));
let fs = require('fs');

let packageName = argv._[0] || argv.p;
let destination = argv._[1] || argv.d;

if (!packageName || !destination) {
    console.error('Package (-p) and Destination (-d) required');
    process.exit(1);
}

download(api, packageName, null).then(
    stream => {
        stream
            .on('error', err => {
                console.error(err.toString());
                process.exit(1);
            })
            .pipe(fs.createWriteStream(destination));
    },
    err => {
        console.error(err.toString());
        process.exit(1);
    }
);
